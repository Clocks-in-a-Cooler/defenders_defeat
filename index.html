<!DOCTYPE html>
<html>
    <head>
        <title>Defender's Defeat</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="styles.css" />
    </head>
    <body>
        <div id="wrapper">
            <canvas></canvas>
            <div id="side-panel">
                <div id="tower-info"></div>
                <div id="send-units">
                    
                </div>
            </div>
        </div>
        <!-- order of script loading:
            1. assets and engine
            2. helpers: vector
            3. data and rendering: map, level, and camera
            4. entity base class
            5. bullet base class and its children
            6. unit base class and its children
            7. tower base class and its children
            
            the javascript files will also be minified in this order.
        -->
        <script src="javascript/assets.js"></script>
        <script src="javascript/engine.js"></script>
        <script src="javascript/vector.js"></script>
        <script src="javascript/map.js"></script>
        <script src="javascript/camera.js"></script>
        <script src="javascript/level.js"></script>
        <script src="javascript/entity.js"></script>
        <script src="javascript/bullets/bullet.js"></script>
        <script src="javascript/bullets/homing_bullet.js"></script>
        <script src="javascript/units/unit.js"></script>
        <script src="javascript/towers/tower.js"></script>
        <script src="javascript/towers/homing_sniper_tower.js"></script>
        <script src="javascript/towers/machine_gun_tower.js"></script>
        <script>
            const map    = new Map(TEST_MAP);
            const camera = new Camera(canvas.getContext("2d"), map);
            
            camera.register_event_handlers();
            
            // for testing only
            // replace with an actual engine!
            function animate() {
                map.update(15);
                camera.draw();
                requestAnimationFrame(animate);
            }
            
            requestAnimationFrame(animate);
            
            function have_fun() {
                map.add_tower(new Tower(new Vector(39, 18), map));
                map.add_tower(new Tower(new Vector(41, 19), map));
                map.add_tower(new Tower(new Vector(39, 20), map));
                map.add_tower(new Tower(new Vector(41, 21), map));
                map.add_tower(new Machine_gun_tower(new Vector(5, 3), map));
                
                setInterval(() => map.entities.push(new Unit(map)), 1000);
            }
            
            have_fun();
        </script>
    </body>
</html>